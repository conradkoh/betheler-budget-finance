<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Current Tasks Progress Tracker</title>
    <meta
      name="description"
      content="Key information about current tasks and their progress"
    />
  </head>

  <body>
    <!-- 
    IMPORTANT: READ BEFORE MODIFYING
    - Sections marked with 'importance: high' should not be removed or significantly altered unless explicitly instructed to do so.
    - The task lists under 'Detailed Technical Tasks' should be updated to reflect current progress.
    - Comments like this one are for guidance and should not be removed.
    - IMPORTANT: This file is synced across multiple users. Each user is responsible for updating
      the progress markers as they complete tasks.
  -->

    <h1>Current Tasks Progress Tracker</h1>

    <section id="tech-stack">
      <h2>Tech Stack</h2>
      <meta name="importance" content="high" />
      <!-- 
      IMPORTANT: This section must be updated before working on any other tasks.
      -->
      <p>
        Please specify the technologies and frameworks used in this project.
      </p>
      <ul>
        <li>Next.js 15.2.2 - Frontend framework</li>
        <li>Convex - Backend service</li>
        <li>React 19.0.0 - JavaScript library for building user interfaces</li>
        <li>TypeScript - Programming language</li>
        <li>Tailwind CSS - Utility-first CSS framework</li>
        <li>Shadcn UI - UI component library</li>
        <li>pnpm - Package manager</li>
        <li>nx - Workspace tool</li>
        <li>Chart.js - Library for displaying charts</li>
        <li>date-fns - Date utility library</li>
      </ul>
    </section>

    <section id="overview">
      <h2>Overview</h2>
      <meta name="importance" content="high" />
      <!-- 
      DO NOT REMOVE: This section provides critical context for the entire document.
      You may update the content if project guidelines change, but maintain the overall structure.
    -->
      <p>
        This file contains key information about the tasks that you are
        currently working on.
      </p>
      <ul>
        <li>Each task should be about 1-3 story points</li>
        <li>
          If modifying existing functionality, do some research about existing
          function names, entities, naming enums, and key interface names and
          properties.
        </li>
        <li>
          Plan and include key details into each task for better consistency
          across tasks
        </li>
        <li>Update progress markers ([x], [.], [ ]) as you complete tasks</li>
      </ul>
    </section>

    <section id="project-structure">
      <h2>Project Structure</h2>
      <meta name="importance" content="high" />
      <!-- 
      DO NOT REMOVE: This section outlines the critical project structure.
      - Keep this structure updated as new components or modules are added
      - Maintain consistent naming conventions
      - Document any structural changes

      Structure Documentation Guidelines:
      - Focus on documenting:
        * Feature-specific directories and their purpose
        * Key architectural components (e.g. workspace packages)
        * Critical implementation locations such as:
          - Convex backend directory
          - React components directory
          - Shared utilities
      - Omit auxiliary files (e.g., framework configuration files, assets) unless they are
        critical to domain related feature implementation

      Naming Conventions:
      - React Components: PascalCase (e.g., BudgetList.tsx)
      - Utility functions: camelCase (e.g., formatCurrency.ts)
      - Database tables: camelCase (e.g., transactions)
      - Convex functions: camelCase (e.g., listTransactions)
      - Type definitions: PascalCase (e.g., TransactionType)
    -->
      <h3>Directory Structure</h3>
      <pre>
betheler-budget-finance/
├── apps/
│   └── webapp/              # Next.js frontend application
│       ├── src/
│       │   ├── app/         # Next.js app router pages
│       │   ├── components/  # React components
│       │   ├── lib/         # Utility functions
│       │   └── modules/     # Feature modules
├── services/
│   └── backend/             # Convex backend
│       ├── convex/          # Convex functions and schema
│       └── types/           # TypeScript types
      </pre>
    </section>

    <section id="process">
      <h2>Process</h2>
      <meta name="importance" content="high" />
      <!-- 
      DO NOT REMOVE: This section outlines the critical process steps.
      Update only if the process changes, otherwise keep as is.
    -->
      <ol>
        <li>Update the tech stack before proceeding with any tasks.</li>
        <li>Do some research for the feature.</li>
        <li>
          Create a list of technical tasks with important information (file
          names, function names, component names, interface names, and enums
          where applicable)
        </li>
        <li>Start working on each task one by one.</li>
        <li>Run the type checks to ensure that everything is working.</li>
        <li>Run the tests to ensure that everything is working.</li>
        <li>
          Provide an update for the latest state of the task list and update
          this file.
        </li>
      </ol>
    </section>

    <section id="legend">
      <h2>Legend</h2>
      <meta name="importance" content="medium" />
      <!-- 
      This legend explains the task status markers.
      Update only if the status marking system changes.
    -->
      <ul>
        <li>[ ] - Not started</li>
        <li>[.] - In progress</li>
        <li>[x] - Completed</li>
      </ul>
    </section>

    <section id="technical-tasks">
      <h2>Technical Tasks</h2>
      <meta name="importance" content="high" />
      <!-- 
      IMPORTANT: This section contains the actual task lists.
      - Update the status markers ([ ], [.], [x]) as tasks progress.
      - Add new tasks or versions as needed.
      - Keep the structure (headings, subheadings) consistent.
      - Ensure all task descriptions include relevant details such as:
        * File names
        * Function names
        * Component names
        * Interface / Type / Enum names (where applicable)
        * Enum Values (where applicable)
      - Do not include tests in the list of tasks.
      - The implementation notes at the end of each version provide context and should be updated as needed.
      - When adding a new version, create a new section with appropriate metadata.

      ⚠️ Implementation Reminders:
      - Keep changes incremental - Make small, focused changes that are easy to validate
      - Verify before proceeding - After creating each file, verify it compiles before moving on
      - Follow existing patterns - Match the code style and patterns already in the codebase
      - Preserve existing code - Be very careful when modifying existing files
      - Minimal dependencies - Avoid adding unnecessary dependencies
      - Implementation order - Start with data models, then backend, then frontend core components, then integration
      - Type safety first - Ensure strong typing throughout the implementation
      - Complete one feature at a time - Implement features vertically (backend to frontend) before moving to the next
    -->
      <section id="v1.0">
        <meta name="version" content="1.0" />
        <h1>📍 Version 1.0</h1>
        <section feature="transaction-management">
          <h3>Transaction Management</h3>
          <p>
            Implementation of transaction management functionality including
            creating, viewing, and deleting transactions.
          </p>
          <ul>
            <li>
              <strong>Backend Implementation</strong>
              <ul>
                <li>
                  [x] Complete the transaction creation mutation in
                  services/backend/convex/transactions.ts
                </li>
                <li>
                  [x] Implement listTransactions query to fetch transactions for
                  the past month in services/backend/convex/transactions.ts
                </li>
                <li>
                  [x] Implement deleteTransaction mutation in
                  services/backend/convex/transactions.ts
                </li>
                <li>
                  [x] Create transaction type definitions in
                  services/backend/convex/_generated/dataModel.d.ts
                </li>
              </ul>
            </li>
            <li>
              <strong>Frontend Implementation</strong>
              <ul>
                <li>
                  [x] Create TransactionForm component in
                  apps/webapp/src/components/TransactionForm.tsx
                </li>
                <li>
                  [x] Create TransactionList component in
                  apps/webapp/src/components/TransactionList.tsx
                </li>
                <li>
                  [x] Create TransactionItem component in
                  apps/webapp/src/components/TransactionItem.tsx
                </li>
                <li>
                  [x] Implement transaction delete confirmation dialog in
                  apps/webapp/src/components/DeleteTransactionDialog.tsx
                </li>
              </ul>
            </li>
            <li>
              <strong>Page Implementation</strong>
              <ul>
                <li>
                  [x] Create transactions page at
                  apps/webapp/src/app/transactions/page.tsx
                </li>
                <li>
                  [x] Add navigation link to transactions in the main layout
                </li>
              </ul>
            </li>
            <li>
              <strong>Additional Components</strong>
              <ul>
                <li>
                  [x] Create CategorySelect component for transaction categories
                  in apps/webapp/src/components/CategorySelect.tsx
                </li>
                <li>
                  [x] Create DateTimePicker component in
                  apps/webapp/src/components/DateTimePicker.tsx
                </li>
                <li>
                  [x] Create currency input/formatter in
                  apps/webapp/src/lib/formatCurrency.ts
                </li>
              </ul>
            </li>
          </ul>
          <p>
            <strong>Implementation Notes:</strong> The transaction functionality
            will be built using Convex for the backend and React with Shadcn UI
            components for the frontend. We'll implement proper authentication
            checks following the pattern in the existing transactions.ts file.
            The transaction schema is already defined in schema.ts with fields
            for userId, amount, category, datetime, and description.
          </p>
        </section>
      </section>

      <section id="v1.1">
        <meta name="version" content="1.1" />
        <h1>📍 Version 1.1</h1>
        <section feature="transaction-enhancements">
          <h3>Transaction Enhancements</h3>
          <p>
            Enhancing the transaction management with a month selector and a
            category spending pie chart.
          </p>
          <ul>
            <li>
              <strong>Backend Implementation</strong>
              <ul>
                <li>
                  [x] Implement listByMonth query in
                  services/backend/convex/transactions.ts to fetch transactions
                  for a specific month
                </li>
                <li>
                  [x] Implement getCategorySummary query in
                  services/backend/convex/transactions.ts to fetch category
                  spending summary
                </li>
              </ul>
            </li>
            <li>
              <strong>Frontend Implementation</strong>
              <ul>
                <li>
                  [x] Create MonthYearPicker component in
                  apps/webapp/src/components/MonthYearPicker.tsx
                </li>
                <li>
                  [x] Create CategoryPieChart component in
                  apps/webapp/src/components/CategoryPieChart.tsx
                </li>
                <li>
                  [x] Update TransactionList component to use month selector and
                  display pie chart in
                  apps/webapp/src/components/TransactionList.tsx
                </li>
              </ul>
            </li>
            <li>
              <strong>Dependencies</strong>
              <ul>
                <li>
                  [x] Add Chart.js and React-ChartJS-2 for pie chart
                  visualization
                </li>
                <li>[x] Add date-fns for date manipulation</li>
              </ul>
            </li>
          </ul>
          <p>
            <strong>Implementation Notes:</strong> The month selector will allow
            filtering transactions for a specific month. The pie chart will
            display the distribution of spending across different categories
            within the selected month. For transactions without a category, they
            will be displayed as "Uncategorized" in the pie chart.
          </p>
        </section>
      </section>

      <section id="mobile-responsiveness">
        <h2>Mobile Responsiveness</h2>
        <meta name="importance" content="high" />
        <p>
          Implementation of proper mobile responsive design throughout the
          application to enhance usability on smaller screens.
        </p>
        <ul>
          <li>
            <strong>Analysis and Setup</strong>
            <ul>
              <li>
                [x] Review and document current mobile UI issues across key
                screens in apps/webapp/src/app/transactions/page.tsx and other
                main pages
              </li>
              <li>
                [x] Update viewport and basic responsive settings in
                apps/webapp/src/app/layout.tsx
              </li>
              <li>
                [x] Create responsive container helpers in
                apps/webapp/src/lib/utils.ts or a new dedicated file
              </li>
            </ul>
          </li>
          <li>
            <strong>Navigation Improvements</strong>
            <ul>
              <li>
                [x] Implement responsive mobile navigation with hamburger menu
                in apps/webapp/src/components/Navigation.tsx
              </li>
              <li>
                [x] Create mobile menu component in
                apps/webapp/src/components/MobileMenu.tsx
              </li>
              <li>
                [x] Update styles for UserMenu component in
                apps/webapp/src/components/UserMenu.tsx for better mobile
                interaction
              </li>
            </ul>
          </li>
          <li>
            <strong>Transaction Pages Responsiveness</strong>
            <ul>
              <li>
                [x] Redesign transaction page layout in
                apps/webapp/src/app/transactions/page.tsx
              </li>
              <li>
                [x] Update TransactionList component in
                apps/webapp/src/components/TransactionList.tsx for mobile
                screens
              </li>
              <li>
                [x] Optimize TransactionItem cards in
                apps/webapp/src/components/TransactionItem.tsx for smaller
                screens
              </li>
              <li>
                [x] Enhance TransactionForm responsiveness in
                apps/webapp/src/components/TransactionForm.tsx
              </li>
            </ul>
          </li>
          <li>
            <strong>Form Components Mobile Optimization</strong>
            <ul>
              <li>
                [x] Improve DateTimePicker for mobile in
                apps/webapp/src/components/DateTimePicker.tsx
              </li>
              <li>
                [x] Enhance CategorySelect for touch devices in
                apps/webapp/src/components/CategorySelect.tsx
              </li>
              <li>
                [x] Update MonthYearPicker for mobile in
                apps/webapp/src/components/MonthYearPicker.tsx
              </li>
            </ul>
          </li>
          <li>
            <strong>Data Visualization Responsiveness</strong>
            <ul>
              <li>
                [x] Make CategoryPieChart responsive in
                apps/webapp/src/components/CategoryPieChart.tsx
              </li>
              <li>
                [x] Move chart legend to bottom on small screens and adjust size
              </li>
            </ul>
          </li>
        </ul>
        <p>
          <strong>Implementation Notes:</strong> The mobile responsive design
          will focus on creating a native mobile app experience while
          maintaining the current functionality. We'll use Tailwind's responsive
          breakpoints (sm, md, lg) consistently across components. The
          navigation will transform into a hamburger menu on mobile, transaction
          cards will stack vertically with optimized layouts, and all forms will
          be adjusted for better touch input. Data visualizations will adapt
          their layouts based on screen size for optimal readability on all
          devices.
        </p>
      </section>

      <section id="performance-improvements">
        <h2>Performance Improvements</h2>
        <meta name="importance" content="high" />
        <p>
          Implementation of performance improvements and UI bug fixes to enhance
          user experience.
        </p>
        <ul>
          <li>
            <strong>React Performance Optimizations</strong>
            <ul>
              <li>
                [x] Add useCallback to event handlers in DateTimePicker
                component in apps/webapp/src/components/DateTimePicker.tsx
              </li>
              <li>
                [x] Memoize computation of navigation items with useMemo in
                apps/webapp/src/components/Navigation.tsx
              </li>
              <li>
                [x] Optimize TransactionList component with useCallback and
                useMemo in apps/webapp/src/components/TransactionList.tsx
              </li>
              <li>
                [x] Apply useMemo for derived values in UserMenu component in
                apps/webapp/src/components/UserMenu.tsx
              </li>
              <li>
                [x] Optimize MobileMenu component with useCallback for event
                handlers in apps/webapp/src/components/MobileMenu.tsx
              </li>
            </ul>
          </li>
          <li>
            <strong>Mobile UI Fixes</strong>
            <ul>
              <li>
                [x] Fix content shift when UserMenu dropdown is expanded on
                mobile in apps/webapp/src/components/Navigation.tsx
              </li>
              <li>
                [x] Improve positioning of dropdown menu in UserMenu component
                to prevent layout shifts in
                apps/webapp/src/components/UserMenu.tsx
              </li>
              <li>
                [x] Fix the SheetContent component's portal to prevent affecting
                main layout in apps/webapp/src/components/ui/sheet.tsx
              </li>
            </ul>
          </li>
        </ul>
        <p>
          <strong>Implementation Notes:</strong> The performance improvements
          will focus on memoizing expensive computations and callback functions
          using React's useCallback and useMemo hooks. We'll also fix the mobile
          UI issue where the main content shifts to the left when the profile
          dropdown is expanded by ensuring the dropdown is positioned with fixed
          positioning and doesn't affect the layout flow. We'll be careful to
          apply memoization judiciously where it makes sense for performance,
          rather than applying it everywhere.
        </p>
      </section>

      <section id="navigation-fixes">
        <h2>Navigation Links Fixes</h2>
        <meta name="importance" content="high" />
        <p>
          Fix issues with navigation links to align with the app's intended UX.
        </p>
        <ul>
          <li>
            <strong>Navigation Structure Cleanup</strong>
            <ul>
              <li>
                [x] Remove profile and home navigation links from the main
                navigation in apps/webapp/src/components/Navigation.tsx
              </li>
              <li>
                [x] Update the "Budget" app name to link to /app instead of home
                page in apps/webapp/src/components/Navigation.tsx
              </li>
              <li>
                [x] Ensure only Transactions link appears in the main navigation
                menu for authenticated users in
                apps/webapp/src/components/Navigation.tsx
              </li>
              <li>
                [x] Update MobileMenu component to reflect the same navigation
                structure in apps/webapp/src/components/MobileMenu.tsx
              </li>
            </ul>
          </li>
        </ul>
        <p>
          <strong>Implementation Notes:</strong> The navigation should be
          simplified to only show the Transactions link in the main navigation
          for authenticated users. The "Budget" app name should link to /app
          (dashboard) instead of the home page. The profile should only be
          accessible via the avatar menu in the top right corner. This will
          create a more streamlined user experience focused on the core
          functionality.
        </p>
      </section>

      <section id="navigation-improvements">
        <h2>Navigation Improvements</h2>
        <meta name="importance" content="high" />
        <p>
          Implement navigation improvements for a more streamlined mobile
          experience.
        </p>
        <ul>
          <li>
            <strong>Mobile Navigation Enhancements</strong>
            <ul>
              <li>
                [x] Remove the mobile hamburger menu completely in
                apps/webapp/src/components/Navigation.tsx
              </li>
              <li>
                [x] Add profile icon to top right on mobile screens in
                apps/webapp/src/components/Navigation.tsx
              </li>
              <li>
                [x] Update UserMenu component to support showing only icon on
                mobile in apps/webapp/src/components/UserMenu.tsx
              </li>
              <li>
                [x] Move user name into the dropdown menu for better mobile
                experience in apps/webapp/src/components/UserMenu.tsx
              </li>
              <li>
                [x] Ensure "Budget" text in header redirects to /app for
                authenticated users in apps/webapp/src/components/Navigation.tsx
              </li>
            </ul>
          </li>
        </ul>
        <p>
          <strong>Implementation Notes:</strong> These improvements aim to
          create a more consistent navigation experience between mobile and
          desktop views. By removing the hamburger menu and adding the profile
          icon directly to the top navigation bar, we reduce the number of
          clicks needed to access profile information. The "Budget" link now
          correctly redirects to the app dashboard for authenticated users,
          ensuring consistent navigation across the application. We've used
          responsive CSS classes to handle the mobile/desktop differences rather
          than JavaScript detection to ensure correct server/client hydration.
        </p>
      </section>
    </section>
  </body>
</html>
